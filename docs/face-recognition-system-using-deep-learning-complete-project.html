<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>IGTechTeam</title>

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      href="/static/images/favicon.png"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />

    <!-- Summernote CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.css"
      rel="stylesheet"
    />

    <!-- Highlight.js -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

    <!-- Font Awesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">


    <!-- jQuery & Summernote JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.js"></script>

    <!-- Bootstrap JS (for navbar toggle) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="/static/css/style.css">
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top glass-nav">
      <div class="container d-flex align-items-center justify-content-between">
        <!-- Left: Logo -->
        <a class="navbar-brand fw-bold fs-3" href="/">
          IGTechTeam
        </a>

        <!-- Center: Nav links -->
        <div class="collapse navbar-collapse justify-content-center" id="navbarContent">
          <ul class="navbar-nav align-items-center">
            
            <li class="nav-item mx-2">
              <a class="nav-link fw-semibold" href="/contact.html">Contact</a>
            </li>
            <li class="nav-item mx-2">
              <a class="nav-link fw-semibold" href="/about.html">About Me</a>
            </li>
            <!-- Play Game separated with margin -->
            <li class="nav-item mx-4 ms-5">
              <a class="nav-link fw-bold play-game-link" href="/game.html">Play Game</a>
            </li>
          </ul>
        </div>

        <!-- Right: Login/Logout buttons -->
        <div class="d-flex align-items-center gap-2">
          
          <a href="/login.html" class="btn btn-success btn-sm px-4 py-2 fw-semibold shadow-sm">
            <i class="bi bi-box-arrow-in-right me-1"></i> Login
          </a>
          
        </div>

        <!-- Toggler button for small screens -->
        <button
          class="navbar-toggler ms-3"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarContent"
          aria-controls="navbarContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </nav>

    <!-- Site Notice -->
    
    


    <!-- Flash Messages -->
    <div class="container">
      
    </div>

    <!-- Page Content -->
    <div class="container page-content">

<!-- Post Header -->
<header
  class="post-header"
  style="
    background: linear-gradient(135deg, #1d2b64, #f8cdda);
    color: white;
    padding: 2.5rem;
    border-radius: 16px 16px 0 0;
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    text-align: center;
  "
>
  <h1
    style="
      font-size: 2.8rem;
      font-weight: bold;
      color: white;
      -webkit-text-stroke: 1px black;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);
      letter-spacing: 1px;
      text-align: center;
      margin-bottom: 1rem;
    "
  >
    Face Recognition System using deep learning | Complete Project
  </h1>

  <span
    style="
      background: rgba(255, 255, 255, 0.2);
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 0.95rem;
    "
  >
    🕒 2025-04-21 09:14:50.117231
  </span>
</header>

<!-- Post Body -->
<div
  class="post-content"
  style="
    padding: 2rem;
    background: #ffffff;
    border-radius: 0 0 16px 16px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
    margin-top: -1px;
  "
>
  <p><p class="wp-embed-aspect-16-9 wp-has-aspect-ratio">Face Recognition System using Deep Learning/Convolutional Neural Network.&nbsp; You have to first collect data, then train your model and the final step is to make a prediction.</p><h2 class="wp-block-heading">What will you learn?</h2><ol class="wp-block-list"><!-- wp:list-item -->
<li><a href="#generate-dataset">Generate a dataset of authorized users</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#create-label">Create a label using a generated dataset</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#create-data">Create data: Train-Test split</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#create-model">Create the model</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#prediction">Visualize the data and make a prediction</a></li>
<!-- /wp:list-item --></ol><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><iframe frameborder="0" src="//www.youtube.com/embed/-I-kSz0rblU" width="640" height="360" class="note-video-clip"></iframe><br></div></figure><p class="has-text-align-right wp-embed-aspect-16-9 wp-has-aspect-ratio" style="text-align: right; "><strong><a href="/face-recognition-system-complete-documentation" target="_blank" rel="noreferrer noopener">View Complete Documentation</a></strong></p><h2 class="wp-block-heading wp-embed-aspect-16-9 wp-has-aspect-ratio" id="generate-dataset">1. Generate a dataset</h2><p class="wp-embed-aspect-16-9 wp-has-aspect-ratio">First of all, I must create the dataset. That implies I'll have to gather pictures. I can use the OpenCV package for this task.</p><p class="wp-embed-aspect-16-9 wp-has-aspect-ratio"> To install this package, open any terminal and type:</p><p class="wp-embed-aspect-16-9 wp-has-aspect-ratio"><code><mark style="background-color: rgb(255, 231, 156);" class="has-inline-color has-luminous-vivid-orange-color">pip install opencv-python</mark></code></p><p class="wp-embed-aspect-16-9 wp-has-aspect-ratio">I am using the haarcascade_frontalface_default XML file to get the coordinates of my face so that I can crop it and use it to make a dataset and for future prediction. </p><p class="wp-embed-aspect-16-9 wp-has-aspect-ratio">I need to convert my RGB (Red, Green, Blue) images to grayscale. An RGB image has three channels, whereas a grayscale image has only one. <br>Turning an image into a grayscale makes things much simpler. Then, we can use a face classifier and a technique called detectMultiScale to find the coordinates we need. We must pass the scaling factor as well as the minimal neighbors. The scale factor is the factor that determines how much to modify from the original image. The number of minimum neighbors indicates how many faces to detect. A greater value yields less detection but of higher quality. We must experiment with this value. We can alter these parameters depending on our results.&nbsp;Then we simply collect the image and terminate the execution when it reaches 200 images or when we press the Enter key on the keyboard.</p><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">import</span> cv2</code></pre><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_dataset</span>():
    face_classifier = cv2.CascadeClassifier(<span class="hljs-string">"haarcascade_frontalface_default.xml"</span>)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">face_cropped</span>(<span class="hljs-params">img</span>):
        gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
        faces = face_classifier.detectMultiScale(gray, <span class="hljs-number">1.3</span>, <span class="hljs-number">5</span>)
        
        <span class="hljs-keyword">if</span> faces <span class="hljs-keyword">is</span> ():
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">for</span> (x,y,w,h) <span class="hljs-keyword">in</span> faces:
            cropped_face = img[y:y+h,x:x+w]
        <span class="hljs-keyword">return</span> cropped_face
    
    cap = cv2.VideoCapture(<span class="hljs-number">1</span>)
    img_id = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        ret, frame = cap.read()
        <span class="hljs-keyword">if</span> face_cropped(frame) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            img_id+=<span class="hljs-number">1</span>
            face = cv2.resize(face_cropped(frame), (<span class="hljs-number">200</span>,<span class="hljs-number">200</span>))
            face = cv2.cvtColor(face, cv2.COLOR_BGR2GRAY)
            <span class="hljs-comment">#file_name_path = "data/"+"Ishwar."+str(img_id)+".jpg"</span>
            file_name_path = <span class="hljs-string">"Images for visualization/"</span>+<span class="hljs-built_in">str</span>(img_id)+<span class="hljs-string">'.jpg'</span>
            cv2.imwrite(file_name_path, face)
            cv2.putText(face, <span class="hljs-built_in">str</span>(img_id), (<span class="hljs-number">50</span>,<span class="hljs-number">50</span>), cv2.FONT_HERSHEY_COMPLEX, <span class="hljs-number">1</span>, (<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>), <span class="hljs-number">2</span> )
            
            cv2.imshow(<span class="hljs-string">"Cropped_Face"</span>, face)
            <span class="hljs-keyword">if</span> cv2.waitKey(<span class="hljs-number">1</span>)==<span class="hljs-number">13</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">int</span>(img_id)==<span class="hljs-number">20</span>:
                <span class="hljs-keyword">break</span>
                
    cap.release()
    cv2.destroyAllWindows()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Collecting samples is completed !!!"</span>)
<span class="hljs-comment">#generate_dataset()</span></code></pre><h2 class="wp-block-heading wp-embed-aspect-16-9 wp-has-aspect-ratio" id="create-label">2. Create a label</h2><p>A numpy module can be used to create a label. In this part, we just need to convert the user name into a numpy array.</p><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np <span class="hljs-comment"># pip install numpy</span></code></pre><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_label</span>(<span class="hljs-params">image_name</span>):
    name = image_name.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">3</span>] 
    <span class="hljs-comment">#suppose your dataset contains two person</span>
<span class="hljs-comment">#     if name=="Ishwar":</span>
<span class="hljs-comment">#         return np.array([1,0])</span>
<span class="hljs-comment">#     elif name=="Manish":</span>
<span class="hljs-comment">#         return np.array([0,1])</span>
    
    
    <span class="hljs-comment"># suppose your dataset contains three person</span>
    <span class="hljs-keyword">if</span> name==<span class="hljs-string">"Ishwar"</span>:
        <span class="hljs-keyword">return</span> np.array([<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>])
    <span class="hljs-keyword">elif</span> name==<span class="hljs-string">"Manish"</span>:
        <span class="hljs-keyword">return</span> np.array([<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>])
    <span class="hljs-keyword">elif</span> name==<span class="hljs-string">"Bijay"</span>:
        <span class="hljs-keyword">return</span> np.array([<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>])</code></pre><h2 class="wp-block-heading wp-embed-aspect-16-9 wp-has-aspect-ratio" id="create-data">3. Create data</h2><p>This part involves creating data from images. OpenCV can be used for this purpose. Also, we need to divide our data into training and testing parts.</p><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> shuffle
<span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm</code></pre><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_data</span>():
    data = []
    <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> tqdm(os.listdir(<span class="hljs-string">"data"</span>)):
        path=os.path.join(<span class="hljs-string">"data"</span>,img)
        img_data = cv2.imread(path, cv2.IMREAD_GRAYSCALE)
        img_data = cv2.resize(img_data, (<span class="hljs-number">50</span>,<span class="hljs-number">50</span>))
        data.append([np.array(img_data), my_label(img)])
    shuffle(data)  
    <span class="hljs-keyword">return</span> data</code></pre><pre><code class="language-python hljs" contenteditable="true" style="">data = my_data()</code></pre><pre><code class="language-python hljs" contenteditable="true" style="">train = data[:<span class="hljs-number">2400</span>]  
test = data[<span class="hljs-number">2400</span>:]
X_train = np.array([i[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> train]).reshape(-<span class="hljs-number">1</span>,<span class="hljs-number">50</span>,<span class="hljs-number">50</span>,<span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(X_train.shape)
y_train = [i[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> train]
X_test = np.array([i[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> test]).reshape(-<span class="hljs-number">1</span>,<span class="hljs-number">50</span>,<span class="hljs-number">50</span>,<span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(X_test.shape)
y_test = [i[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> test]</code></pre><h2 class="wp-block-heading wp-embed-aspect-16-9 wp-has-aspect-ratio" id="create-model">4. Create the model</h2><p>This part involves creating a model with tflearn. The convolutional neural network plays a major role in creating a model. We utilize a ReLU activation layer.</p><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-comment"># import warnings</span>
<span class="hljs-comment"># warnings.filterwarnings('ignore')</span>

<span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf
<span class="hljs-keyword">import</span> tflearn
<span class="hljs-keyword">from</span> tflearn.layers.conv <span class="hljs-keyword">import</span> conv_2d, max_pool_2d
<span class="hljs-keyword">from</span> tflearn.layers.core <span class="hljs-keyword">import</span> input_data, dropout, fully_connected
<span class="hljs-keyword">from</span> tflearn.layers.estimator <span class="hljs-keyword">import</span> regression</code></pre><pre><code class="language-python hljs" contenteditable="true" style="">tf.reset_default_graph()
convnet = input_data(shape=[<span class="hljs-number">50</span>,<span class="hljs-number">50</span>,<span class="hljs-number">1</span>])
convnet = conv_2d(convnet, <span class="hljs-number">32</span>, <span class="hljs-number">5</span>, activation=<span class="hljs-string">'relu'</span>)
<span class="hljs-comment"># 32 filters and stride=5 in order for the filter to move 5 pixels or units at once.</span>
convnet = max_pool_2d(convnet, <span class="hljs-number">5</span>)
convnet = conv_2d(convnet, <span class="hljs-number">64</span>, <span class="hljs-number">5</span>, activation=<span class="hljs-string">'relu'</span>)
convnet = max_pool_2d(convnet, <span class="hljs-number">5</span>)
convnet = conv_2d(convnet, <span class="hljs-number">128</span>, <span class="hljs-number">5</span>, activation=<span class="hljs-string">'relu'</span>)
convnet = max_pool_2d(convnet, <span class="hljs-number">5</span>)
convnet = conv_2d(convnet, <span class="hljs-number">64</span>, <span class="hljs-number">5</span>, activation=<span class="hljs-string">'relu'</span>)
convnet = max_pool_2d(convnet, <span class="hljs-number">5</span>)
convnet = conv_2d(convnet, <span class="hljs-number">32</span>, <span class="hljs-number">5</span>, activation=<span class="hljs-string">'relu'</span>)
convnet = max_pool_2d(convnet, <span class="hljs-number">5</span>)

convnet = fully_connected(convnet, <span class="hljs-number">1024</span>, activation=<span class="hljs-string">'relu'</span>)
convnet = dropout(convnet, <span class="hljs-number">0.8</span>)
convnet = fully_connected(convnet, <span class="hljs-number">3</span>, activation=<span class="hljs-string">'softmax'</span>)
convnet = regression(convnet, optimizer=<span class="hljs-string">'adam'</span>, learning_rate = <span class="hljs-number">0.001</span>, loss=<span class="hljs-string">'categorical_crossentropy'</span>)
model = tflearn.DNN(convnet, tensorboard_verbose=<span class="hljs-number">1</span>)
model.fit(X_train, y_train, n_epoch=<span class="hljs-number">12</span>, validation_set=(X_test, y_test), show_metric = <span class="hljs-literal">True</span>, run_id=<span class="hljs-string">"FRS"</span> )</code></pre><h2 class="wp-block-heading wp-embed-aspect-16-9 wp-has-aspect-ratio" id="prediction">5. Let's visualize the data and make a prediction</h2><p>Now it's time to visualize our data and make a prediction. Our model should identify authorized users.</p><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">def</span> <span class="hljs-title function_">data_for_visualization</span>():
    Vdata = []
    <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> tqdm(os.listdir(<span class="hljs-string">"Images for visualization"</span>)):
        path = os.path.join(<span class="hljs-string">"Images for visualization"</span>, img)
        img_num = img.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>] 
        img_data = cv2.imread(path, cv2.IMREAD_GRAYSCALE)
        img_data = cv2.resize(img_data, (<span class="hljs-number">50</span>,<span class="hljs-number">50</span>))
        Vdata.append([np.array(img_data), img_num])
    shuffle(Vdata)
    <span class="hljs-keyword">return</span> Vdata</code></pre><pre><code class="language-python hljs" contenteditable="true" style="">Vdata = data_for_visualization()</code></pre><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt   <span class="hljs-comment"># installation command: pip install matplotlib</span>

fig = plt.figure(figsize=(<span class="hljs-number">20</span>,<span class="hljs-number">20</span>))
<span class="hljs-keyword">for</span> num, data <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(Vdata[:<span class="hljs-number">20</span>]):
    img_data = data[<span class="hljs-number">0</span>]
    y = fig.add_subplot(<span class="hljs-number">5</span>,<span class="hljs-number">5</span>, num+<span class="hljs-number">1</span>)
    image = img_data
    data = img_data.reshape(<span class="hljs-number">50</span>,<span class="hljs-number">50</span>,<span class="hljs-number">1</span>)
    model_out = model.predict([data])[<span class="hljs-number">0</span>]
    
    <span class="hljs-keyword">if</span> np.argmax(model_out) == <span class="hljs-number">0</span>:
        my_label = <span class="hljs-string">'Ishwar'</span>
    <span class="hljs-keyword">elif</span> np.argmax(model_out) == <span class="hljs-number">1</span>:
        my_label = <span class="hljs-string">'Manish'</span>
    <span class="hljs-keyword">else</span>:
        my_label = <span class="hljs-string">'Bijay'</span>
        
    y.imshow(image, cmap=<span class="hljs-string">'gray'</span>)
    plt.title(my_label)
    
    y.axes.get_xaxis().set_visible(<span class="hljs-literal">False</span>)
    y.axes.get_yaxis().set_visible(<span class="hljs-literal">False</span>)
plt.show()</code></pre><h2 class="wp-block-heading wp-embed-aspect-16-9 wp-has-aspect-ratio"><strong>Final output:</strong></h2><h2 class="wp-block-heading wp-embed-aspect-16-9 wp-has-aspect-ratio"><img src="https://drive.google.com/thumbnail?id=1NnJbCF0O0Iqe-ONsmBsVwzpDyYuEqvMJ&amp;sz=w1000" data-filename="face-prediction.png" style="width: 715px;"><br></h2><figure class="wp-block-image size-large"><br></figure><h2 class="wp-block-heading">Conclusion:</h2><p>In this way, you can identify and recognize the face of an authorized user using Deep learning. Make sure you collect the face of a user properly. The quality of your output is determined by how your face is generated. I recommend that you watch the video step by step I have provided.</p><p><!-- wp:paragraph {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:paragraph -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:list {"ordered":true} -->

<!-- /wp:list -->

<!-- wp:embed {"url":"https://youtu.be/-I-kSz0rblU","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:embed -->

<!-- wp:paragraph {"align":"right","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:paragraph -->

<!-- wp:heading {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:heading -->

<!-- wp:paragraph {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:paragraph -->

<!-- wp:paragraph {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:paragraph -->

<!-- wp:paragraph {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:paragraph -->

<!-- wp:paragraph {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:paragraph -->

<!-- wp:paragraph {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:heading -->

<!-- wp:image {"id":1333,"sizeSlug":"large","linkDestination":"none"} -->

<!-- /wp:image -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->
</p><p></p>
<!-- /wp:paragraph --><p></p><p>I hope this project is helpful to you. If you have any questions, you can ask me in the comment section below. I will reply as soon as possible. Thanks.</p></p>
</div>

<!-- Comment section -->
<div class="comments-wrapper">
  <h4>Leave a Comment</h4>
  <form method="POST" class="p-3 bg-light rounded shadow">
    <input type="hidden" name="parent_id" value="" />

    <div class="form-group">
      <label>Your Name</label>
      <input type="text" name="name" class="form-control" required />
    </div>

    <div class="form-group">
      <label>Your Comment</label>
      <textarea name="content" class="form-control" rows="3" required></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Post Comment</button>
  </form>
</div>
<hr />



        <style>
        .comment-container {
            margin-left: 20px;
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fafafa;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .comment-header {
            font-weight: 600;
            font-size: 0.95rem;
            color: #333;
            margin-bottom: 0.3rem;
        }

        .comment-timestamp {
            font-weight: 400;
            font-size: 0.8rem;
            color: #777;
            margin-left: 0.5rem;
        }

        .comment-content {
            margin-bottom: 0.8rem;
            white-space: pre-wrap;
        }

        .reply-link {
            font-size: 0.85rem;
            color: #1877f2;
            cursor: pointer;
            user-select: none;
        }

        .reply-link:hover {
            text-decoration: underline;
        }

        .reply-form {
            margin-top: 0.8rem;
            display: none;
        }

        .reply-form input,
        .reply-form textarea {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .reply-form button {
            font-size: 0.85rem;
        }

        /* Nested replies indent */
        .nested-replies {
            margin-left: 30px;
            margin-top: 1rem;
        }

        .comments-wrapper {
            margin: 20px auto;
            padding: 15px 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            font-family: Arial, sans-serif;
        }

        .comments-wrapper h4 {
            margin-bottom: 15px;
            color: #333;
            font-weight: 600;
            font-size: 1.5rem;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 5px;
        }
        </style>

      <div class="comments-wrapper">
        <h4>Comments</h4>
        <div class="comment-container">
            <p>Loading comments...</p>
        </div>
        </div>

        <script>
        (function () {
          const form = document.querySelector("form");
          const commentsContainer = document.querySelector(".comment-container");
          if (!form || !commentsContainer) return;

          const slug = "face-recognition-system-using-deep-learning-complete-project";
          const submitBtn = form.querySelector("button[type='submit']");

          form.addEventListener("submit", function (e) {
            e.preventDefault();
            const data = {
              slug,
              name: form.name.value.trim(),
              content: form.content.value.trim(),
              parent_id: form.parent_id.value || null,
            };

            if (!data.name || !data.content) {
              alert("Please fill in your name and comment.");
              return;
            }

            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = "Posting...";

            fetch("/.netlify/functions/submit_comment", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),
            })
            .then(res => {
              submitBtn.disabled = false;
              submitBtn.textContent = originalText;
              if (res.ok) {
                alert("Comment submitted!");
                form.reset();
                loadComments();
              } else {
                return res.text().then(text => alert("Failed: " + text));
              }
            })
            .catch(err => {
              submitBtn.disabled = false;
              submitBtn.textContent = originalText;
              alert("Error: " + err.message);
            });
          });

          function loadComments() {
            fetch(`/.netlify/functions/get_comments?slug=${encodeURIComponent(slug)}`)
              .then(res => {
                if (!res.ok) throw new Error("Failed to load comments");
                return res.json();
              })
              .then(comments => {
                commentsContainer.innerHTML = "";
                const map = {};
                comments.forEach(c => {
                  c.children = [];
                  map[c.id] = c;
                });
                comments.forEach(c => {
                  if (c.parent_id && map[c.parent_id]) {
                    map[c.parent_id].children.push(c);
                  }
                });

                const render = (comment) => {
                  const wrapper = document.createElement("div");
                  wrapper.className = "comment-container";

                  const header = document.createElement("div");
                  header.className = "comment-header";
                  header.innerHTML = `<strong>${escapeHtml(comment.name)}</strong><span class="comment-timestamp"> - ${new Date(comment.timestamp).toLocaleString()}</span>`;
                  wrapper.appendChild(header);

                  const content = document.createElement("div");
                  content.className = "comment-content";
                  content.textContent = comment.content;
                  wrapper.appendChild(content);

                  const replyLink = document.createElement("span");
                  replyLink.className = "reply-link";
                  replyLink.textContent = "Reply";
                  replyLink.onclick = () => toggleReplyForm(`reply-form-${comment.id}`);
                  wrapper.appendChild(replyLink);

                  const replyForm = document.createElement("form");
                  replyForm.method = "POST";
                  replyForm.className = "reply-form";
                  replyForm.id = `reply-form-${comment.id}`;
                  replyForm.innerHTML = `
                    <input type="hidden" name="parent_id" value="${comment.id}" />
                    <input type="text" name="name" placeholder="Your Name" class="form-control form-control-sm" required />
                    <textarea name="content" placeholder="Write a reply..." class="form-control form-control-sm" rows="2" required></textarea>
                    <button type="submit" class="btn btn-sm btn-primary">Post Reply</button>
                  `;
                  replyForm.addEventListener("submit", function (e) {
                    e.preventDefault();
                    const replyData = {
                      slug,
                      name: replyForm.name.value.trim(),
                      content: replyForm.content.value.trim(),
                      parent_id: comment.id,
                    };

                    if (!replyData.name || !replyData.content) {
                      alert("Please fill in your name and reply.");
                      return;
                    }

                    const replyBtn = replyForm.querySelector("button");
                    const originalText = replyBtn.textContent;
                    replyBtn.disabled = true;
                    replyBtn.textContent = "Posting...";

                    fetch("/.netlify/functions/submit_comment", {
                      method: "POST",
                      headers: {
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify(replyData),
                    })
                      .then(res => {
                        replyBtn.disabled = false;
                        replyBtn.textContent = originalText;
                        if (res.ok) {
                          alert("Reply submitted!");
                          replyForm.reset();
                          replyForm.style.display = "none";
                          loadComments();
                        } else {
                          return res.text().then(text => alert("Failed: " + text));
                        }
                      })
                      .catch(err => {
                        replyBtn.disabled = false;
                        replyBtn.textContent = originalText;
                        alert("Error: " + err.message);
                      });
                  });
                  wrapper.appendChild(replyForm);

                  if (comment.children.length) {
                    const nested = document.createElement("div");
                    nested.className = "nested-replies";
                    comment.children.forEach(child => nested.appendChild(render(child)));
                    wrapper.appendChild(nested);
                  }

                  return wrapper;
                };

                const topLevel = comments.filter(c => !c.parent_id);
                if (topLevel.length === 0) {
                  commentsContainer.innerHTML = "<p>No comments yet. Be the first to comment!</p>";
                } else {
                  topLevel.forEach(c => commentsContainer.appendChild(render(c)));
                }
              })
              .catch(err => {
                commentsContainer.innerHTML = "<p>Failed to load comments.</p>";
                console.error(err);
              });
          }

          function toggleReplyForm(id) {
            const form = document.getElementById(id);
            if (form) {
              const isHidden = window.getComputedStyle(form).display === "none";
              form.style.display = isHidden ? "block" : "none";
            }
          }

          function escapeHtml(text) {
            return text
              .replace(/&/g, "&amp;")
              .replace(/</g, "&lt;")
              .replace(/>/g, "&gt;")
              .replace(/"/g, "&quot;")
              .replace(/'/g, "&#039;");
          }

          loadComments();
        })();
        </script>
        
<!-- Post Footer -->
<footer
  class="post-footer"
  style="
    margin-top: 2rem;
    background: #f1f3f6;
    padding: 2rem;
    border-radius: 16px;
    text-align: center;
    font-size: 0.95rem;
    color: #444;
    box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.05);
  "
>
  <p><strong>Author:</strong> Ishwar Gautam</p>

  <!-- Buttons -->
  <div style="margin: 1rem 0">
    <a
      href="/"
      class="btn btn-outline-primary"
      style="margin-right: 1rem"
      >← Back to Home</a
    >
    <a
      href="#"
      onclick="window.scrollTo({top: 0, behavior: 'smooth'});"
      class="btn btn-primary"
      >↑ Back to Top</a
    >
  </div>

  <!-- Social Icons -->
  <div class="social-icons" style="margin-top: 1.5rem">
    <a
      href="https://www.facebook.com/igtechteam/"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #3b5998"
      ><i class="fab fa-facebook"></i
    ></a>
    <a
      href="https://www.instagram.com/ishwar_gautam1/"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #e4405f"
      ><i class="fab fa-instagram"></i
    ></a>
    <a
      href="https://github.com/ishwargautam"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #333"
      ><i class="fab fa-github"></i
    ></a>
    <a
      href="https://www.linkedin.com/in/ishwargautam1"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #0077b5"
      ><i class="fab fa-linkedin"></i
    ></a>
    <a
      href="https://www.tiktok.com/@ishwar.gautam1?_t=8pdEalQ0Nn7&_r=1"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #000"
      ><i class="fab fa-tiktok"></i
    ></a>
  </div>

  <!-- YouTube Subscribe -->
  <div style="margin-top: 1.5rem">
    <a
      class="youtube-btn"
      href="https://www.youtube.com/channel/UC4Wf9XNPsbXwQqfKlUZfmtw?sub_confirmation=1"
      target="_blank"
      style="
        background: #ff0000;
        color: white;
        padding: 0.6rem 1.2rem;
        border-radius: 30px;
        text-decoration: none;
        font-weight: bold;
        transition: background 0.3s ease;
      "
    >
      🔔 Subscribe on YouTube
    </a>
  </div>
</footer>

</div>

    <!-- Footer -->
    
<!-- Leaving this empty so to skip base.html footer-->


    <!-- Summernote Initialization -->
    <script>
      $(document).ready(function () {
        $("#summernote").summernote({
          height: 300,
          toolbar: [
            ["style", ["style"]],
            ["font", ["bold", "italic", "underline", "clear"]],
            ["fontname", ["fontname"]],
            ["fontsize", ["fontsize"]],
            ["color", ["color"]],
            ["para", ["ul", "ol", "paragraph"]],
            ["insert", ["link", "picture", "video", "table", "hr"]],
            ["view", ["fullscreen", "codeview", "help"]],
            ["custom", ["codeblock"]],
          ],
          buttons: {
            codeblock: function (context) {
              var ui = $.summernote.ui;
              var button = ui.button({
                contents: '<i class="fa fa-code"></i> Code Block',
                tooltip: "Insert Code Block",
                click: function () {
                  let lang = prompt(
                    "Enter language (e.g. python, javascript, java, html, css):",
                    "python"
                  );
                  if (!lang) lang = "plaintext";

                  var codeBlock = `
                <pre><code class="language-${lang}" contenteditable="true" style="white-space: pre-wrap;"></code></pre>
              `;
                  context.invoke("editor.pasteHTML", codeBlock);
                  hljs.highlightAll();
                  var codeBlockNode =
                    context.invoke("editor.getBody").lastChild;
                  $(codeBlockNode).find("code").focus();
                },
              });
              return button.render();
            },
          },
        });

        // Auto-highlight on Enter inside code blocks
        $(".note-editable").on("keyup", function (e) {
          if (e.key === "Enter") {
            $(this)
              .find("pre code")
              .each(function () {
                hljs.highlightElement(this);
              });
          }
        });

        hljs.highlightAll();
      });
    </script>
  </body>
</html>
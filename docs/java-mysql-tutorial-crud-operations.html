<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>IGTechTeam</title>

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      href="/static/images/favicon.png"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />

    <!-- Summernote CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.css"
      rel="stylesheet"
    />

    <!-- Highlight.js -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

    <!-- Font Awesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <!-- jQuery & Summernote JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.js"></script>

    <!-- Bootstrap JS (for navbar toggle) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <style>
      body {
        background-color: #e6f0f7;
        font-family: "Segoe UI", sans-serif;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }

      .navbar {
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 1000;
        background-color: #1f2c39;
      }

      .navbar-brand {
        font-weight: bold;
        font-size: 1.4rem;
        color: #fff !important;
      }

      .navbar-nav .nav-link {
        color: #f8f9fa !important;
        font-weight: 500;
        padding: 8px 16px;
      }

      .navbar-nav .nav-link:hover {
        background-color: #485768;
        border-radius: 5px;
      }

      .navbar-nav .btn {
        border-radius: 8px;
        transition: all 0.2s ease;
      }

      .navbar-nav .btn:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .alert-warning {
        margin-top: 1rem;
        font-weight: 500;
        border-left: 6px solid #ffc107;
        background-color: #fff8e1;
      }

      .alert-danger {
        margin-top: 1rem;
      }

      .post-card {
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
        padding: 1rem;
      }

      .post-title {
        font-size: 1.75rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: #343a40;
      }

      /* Images in post content - full width only on mobile */
      @media (max-width: 1024px) {
        .post-content img[style] {
          width: 100% !important;
        }
      }

      .featured-image-container {
        display: flex;
        justify-content: center;
        align-items: center;
        max-width: 100%;
        aspect-ratio: 3 / 2;
        border-radius: 8px;
        overflow: hidden;
      }

      .featured-img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      .badge {
        font-size: 0.875rem;
        font-weight: 600;
        padding: 5px 10px;
      }

      .text-dark {
        text-decoration: none;
      }

      /* Fix maximize fullscreen issue in Summernote */
      .note-editor.fullscreen {
        z-index: 9999 !important;
        position: fixed !important;
        top: 0;
        left: 0;
        width: 100% !important;
        height: 100% !important;
        background: white !important;
        overflow: auto;
      }

      body.note-editor-fullscreen {
        overflow: hidden;
      }

      .social-icons {
        padding-bottom: 10px;
      }

      .social-icons a {
        color: #f8f9fa;
        font-size: 1.5rem;
        margin: 0 10px;
        transition: all 0.3s ease;
      }

      .social-icons a:hover {
        color: #007bff;
        transform: scale(1.2);
      }

      .page-content{
        flex: 1;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md navbar-light sticky-top">
      <div class="container">
        <a class="navbar-brand" href="/">
          IGTechTeam
        </a>

        <!-- Mobile toggle button -->
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarContent"
          aria-controls="navbarContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarContent">
          <div class="navbar-nav mr-auto">
            
            <a class="nav-link" href="/contact.html"
              >Contact</a
            >
            <a class="nav-link" href="/about.html">About me</a>
          </div>

          <div class="navbar-nav ml-auto d-flex align-items-center">
            <a
              class="btn btn-light px-4 py-2 fw-semibold shadow-sm mr-2"
              href="/login.html"
            >
              Login
            </a>

            
          </div>
        </div>
      </div>
    </nav>

    <!-- Site Notice -->
    <div class="container text-center">
      <div class="alert alert-warning" role="alert">
        üöß Website construction is going on! Please check back later. üöß
      </div>
    </div>

    <!-- Flash Messages -->
    <div class="container">
      
    </div>

    <!-- Page Content -->
    <div class="container page-content">

<!-- Post Header -->
<header
  class="post-header"
  style="
    background: linear-gradient(135deg, #1d2b64, #f8cdda);
    color: white;
    padding: 2.5rem;
    border-radius: 16px 16px 0 0;
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    text-align: center;
  "
>
  <h1
    style="
      font-size: 2.8rem;
      font-weight: bold;
      color: white;
      -webkit-text-stroke: 1px black;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);
      letter-spacing: 1px;
      text-align: center;
      margin-bottom: 1rem;
    "
  >
    Java MySQL Tutorial: CRUD Operations
  </h1>

  <span
    style="
      background: rgba(255, 255, 255, 0.2);
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 0.95rem;
    "
  >
    üïí 2025-04-21 09:14:50.117231
  </span>
</header>

<!-- Post Body -->
<div
  class="post-content"
  style="
    padding: 2rem;
    background: #ffffff;
    border-radius: 0 0 16px 16px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
    margin-top: -1px;
  "
>
  <p><p>Connect your Java console with a database so that you can perform several operations like creating, deleting, inserting, and updating records.</p><h2 class="wp-block-heading">What will you learn?</h2><ol class="wp-block-list"><!-- wp:list-item -->
<li><a href="#mysql-connector">Download the MySQL connector jar file.</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#test-jar">Test if the jar file is loaded or not.</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#setup-server">Set up a local server environment.</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#jdbc">JDBC (Java Database Connectivity)</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#crud">Perform CRUD operations in Java</a></li>
<!-- /wp:list-item --></ol><h2 class="wp-block-heading" id="mysql-connector"><strong>Download the MySQL connector jar file:</strong></h2><p>The most important part includes making <strong>connections</strong>. Mysql connector can be used to make a connection to the database. Download the latest version of the Mysql connector so that you won't face any problems during the connection. You can easily navigate to this <a href="https://dev.mysql.com/downloads/connector/j/" target="_blank" rel="noreferrer noopener">URL</a> and download mysql connector.</p><ul class="wp-block-list"><!-- wp:list-item -->
<li>Select the operating system as platform independent.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>It lists MySQL connectors. Download any one of them.</li><li>Extract the file.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Inside that file, there must be a file with a name like <code>mysql-connector-java-x.x.x.jar</code></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Open your editor: eclipse or IntelliJ Idea. Right now, I am doing for the eclipse. But for other editors also, the steps are nearly the same.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Create a Java project. </li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>To add a jar file, right-click on the project &gt; Build Path &gt; Configure Build Path.</li><li>Add your jar file in the Java Build Path &gt; Libraries &gt; ModulePath.</li><li>There must be a module-info.java file in your src folder. If not, create one.</li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li>Add your dependency there as below.</li></ul><pre><code class="language-plaintext hljs" contenteditable="true" style="">module javaConnection {
  requires java.sql;
}</code></pre><p>Now, your jar file should be loaded properly.</p><h2 class="wp-block-heading" id="test-jar">Test if the jar file is loaded or not:</h2><pre><code class="language-java hljs" contenteditable="true" style=""><span class="hljs-keyword">package</span> connection;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-keyword">try</span> {
      Class.forName(<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>);

      System.out.println(<span class="hljs-string">"Driver loaded properly."</span>);
    } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
      System.out.println(<span class="hljs-string">"Class not found exception"</span>);
      System.out.println(e);
    }
  }
}</code></pre><h2 class="wp-block-heading" id="setup-server">Set up a local server environment:</h2><p>You can use XAMPP to set up a local server environment to manage the database locally. To install Xampp, you can click <a rel="noreferrer noopener" href="https://www.apachefriends.org/download.html" target="_blank">here</a>.</p><p>Then you can run your server through Xampp. Go to <code><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-vivid-cyan-blue-color">localhost/phpmyadmin</mark></code> from your browser, it should redirect to the dashboard from where you can create a database and a table.</p><p>You can create a database with a name say, Student_DB, and a table with a name say, Stu_Table.</p><h2 class="wp-block-heading" id="jdbc">JDBC (Java Database Connectivity)</h2><p>Make sure your Java is successfully connected to the database.</p><pre><code class="language-java hljs" contenteditable="true" style=""><span class="hljs-keyword">package</span> connection;

<span class="hljs-keyword">import</span> java.sql.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">setconnection</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">databaseURL</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://localhost:3306/Student_DB"</span>;

    <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;
    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
    <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">try</span> {
      Class.forName(<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>);

      <span class="hljs-keyword">try</span> {
        conn = DriverManager.getConnection(databaseURL, user, password);
      } <span class="hljs-keyword">catch</span> (SQLException e) {
        System.out.println(e);
      }
    } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
      System.out.println(<span class="hljs-string">"Class not found exception"</span>);
    }
    <span class="hljs-keyword">return</span> conn;
  }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">Main</span> <span class="hljs-variable">main</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Main</span>();

    <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> setconnection();
    <span class="hljs-keyword">if</span> (conn == <span class="hljs-literal">null</span>) {
      System.out.println(<span class="hljs-string">"Connection not established."</span>);
    } <span class="hljs-keyword">else</span> {
      System.out.println(<span class="hljs-string">"Successfully connected to the database."</span>);
    }

  }
}</code></pre><p>I have made a complete video and post on <strong><a rel="noreferrer noopener" href="#jdbc" target="_blank">JDBC</a></strong> (Java Database Connectivity). As its name suggests, it is a process of connection between Java and a database using MySQL connector.</p><p>After connecting to the database, you can easily perform CRUD operations.</p><h2 class="wp-block-heading" id="crud">CRUD (Create, Read/Retrieve, Update, Delete) operation in Java</h2><p>In Java, the CRUD (Create, Read/Retrieve, Update, and Delete) operation is most useful to perform any task related to the database.</p><p><strong>C</strong>reate statement = Construct a database and a table</p><p><strong>R</strong>ead statement = Read database information</p><p><strong>U</strong>pdate = Change the value in a database</p><p><strong>D</strong>elete statement = Delete a row in a database</p><p>CRUD is data-driven and makes use of HTTP methods in a standardized manner. HTTP contains a few methods that act as CRUD operations and it is important to note that they are quite important from a developmental point of view in programming that also helps us relate better web development and also aids us when dealing with databases. As a result, the following are the standard CRUD Operations:</p><p><strong>POST</strong>: This method produces a new resource.<br><strong>GET</strong>: Reads and returns a resource.<br><strong>PUT</strong>: This method updates an existing resource.<br><strong>DELETE</strong>: Removes a resource.</p><pre><code class="language-java hljs" contenteditable="true" style=""><span style="text-wrap-mode: wrap;">package connection;

import java.sql.*;

public class Main {

  public static Connection setconnection() {
    String databaseURL = "jdbc:mysql://localhost:3306/Student_DB";
    String user = "root";
    String password = "";

    Connection conn = null;

    try {
      Class.forName("com.mysql.cj.jdbc.Driver");

      try {
        conn = DriverManager.getConnection(databaseURL, user, password);
        System.out.println("Connected to the database");
      } catch (SQLException e) {
        System.out.println(e);
      }
    } catch (ClassNotFoundException e) {
      System.out.println("Class not found exception");
    }
    return conn;
  }

  // Insert/Create data into database
  public void insert() {
    Connection conn = setconnection();
    try {
      Statement st = conn.createStatement();
      st.executeUpdate("insert into Stu_Table(id,name,address,age) " + "values(2,'Ishwar','Butwal', 27)");
      System.out.println("Data successfully inserted.");
    } catch (SQLException e) {
      System.out.println(e);
    }
  }

  // Retrieve data from database
  public void read() {
    Connection conn = setconnection();
    try {
      Statement st = conn.createStatement();
      ResultSet rs = st.executeQuery("select * from Stu_Table");
      while (rs.next()) {
        System.out.println(rs.getString("name") + "\t" + rs.getString("address") + "\t" + rs.getInt("age"));

      }
    } catch (SQLException e) {
      System.out.println(e);
    }

  }

  // Update data into database
  public void update() {
    Connection conn = setconnection();
    try {
      Statement st = conn.createStatement();
      st.executeUpdate("update Stu_Table set age=26 where id=2");
      System.out.println("Data successfully updated.");
    } catch (SQLException e) {
      System.out.println(e);
    }
  }

  // Delete data from the database
  public void delete() {
    Connection conn = setconnection();
    try {
      Statement st = conn.createStatement();
      st.executeUpdate("delete from Stu_Table where id=2");
      System.out.println("Data successfully deleted.");
    } catch (SQLException e) {
      System.out.println(e);
    }
  }

  public static void main(String[] args) {
    Main main = new Main();
    // Run one statement at a time (insert, read, update, delete)
    main.insert();
    //		main.read();
    //        main.update();
    //        main.delete();

  }
}</span></code></pre><pre class="wp-block-syntaxhighlighter-code"><span style="font-size: 2rem; color: rgb(0, 0, 0); font-family: sans-serif;">Conclusion:</span></pre><p>In this way, you can perform CRUD operations in Java. First of all, you need to install the MySQL connector jar file and then locate the file properly in your editor. After that, you can set up a local server with Xampp and test the connection to the database. Finally, you can perform insert/create, read/retrieve, update, and delete operations in Java.</p><p><!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:list {"ordered":true} -->

<!-- /wp:list -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:list -->

<!-- /wp:list -->

<!-- wp:list -->

<!-- /wp:list -->

<!-- wp:list -->

<!-- /wp:list -->

<!-- wp:list -->

<!-- /wp:list -->

<!-- wp:syntaxhighlighter/code {"language":"java"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:syntaxhighlighter/code {"language":"java"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"java"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"java"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph --></p><p>I hope this post is very helpful to you. If you have any questions, you can ask me in the comment section. I will reply as soon as possible. Thanks.</p></p>
</div>

<!-- Comment section -->
<h3>Leave a Comment</h3>
<form method="POST" action="/java-mysql-tutorial-crud-operations/comment.html" class="p-3 bg-light rounded shadow">
  <input type="hidden" name="parent_id" value="" />

  <div class="form-group">
    <label>Your Name</label>
    <input type="text" name="name" class="form-control" required />
  </div>

  <div class="form-group">
    <label>Your Comment</label>
    <textarea name="content" class="form-control" rows="3" required></textarea>
  </div>

  <button type="submit" class="btn btn-primary">Post Comment</button>
</form>

<hr />

<!--
<h4>Comments</h4>


  <p>No comments yet. Be the first to comment!</p>

-->

<!-- Post Footer -->
<footer
  class="post-footer"
  style="
    margin-top: 2rem;
    background: #f1f3f6;
    padding: 2rem;
    border-radius: 16px;
    text-align: center;
    font-size: 0.95rem;
    color: #444;
    box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.05);
  "
>
  <p><strong>Author:</strong> Ishwar Gautam</p>

  <!-- Buttons -->
  <div style="margin: 1rem 0">
    <a
      href="/"
      class="btn btn-outline-primary"
      style="margin-right: 1rem"
      >‚Üê Back to Home</a
    >
    <a
      href="#"
      onclick="window.scrollTo({top: 0, behavior: 'smooth'});"
      class="btn btn-primary"
      >‚Üë Back to Top</a
    >
  </div>

  <!-- Social Icons -->
  <div class="social-icons" style="margin-top: 1.5rem">
    <a
      href="https://www.facebook.com/igtechteam/"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #3b5998"
      ><i class="fab fa-facebook"></i
    ></a>
    <a
      href="https://www.instagram.com/ishwar_gautam1/"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #e4405f"
      ><i class="fab fa-instagram"></i
    ></a>
    <a
      href="https://github.com/ishwargautam"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #333"
      ><i class="fab fa-github"></i
    ></a>
    <a
      href="https://www.linkedin.com/in/ishwargautam1"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #0077b5"
      ><i class="fab fa-linkedin"></i
    ></a>
    <a
      href="https://www.tiktok.com/@ishwar.gautam1?_t=8pdEalQ0Nn7&_r=1"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #000"
      ><i class="fab fa-tiktok"></i
    ></a>
  </div>

  <!-- YouTube Subscribe -->
  <div style="margin-top: 1.5rem">
    <a
      class="youtube-btn"
      href="https://www.youtube.com/channel/UC4Wf9XNPsbXwQqfKlUZfmtw?sub_confirmation=1"
      target="_blank"
      style="
        background: #ff0000;
        color: white;
        padding: 0.6rem 1.2rem;
        border-radius: 30px;
        text-decoration: none;
        font-weight: bold;
        transition: background 0.3s ease;
      "
    >
      üîî Subscribe on YouTube
    </a>
  </div>
</footer>

</div>

    <!-- Footer -->
    
<!-- Leaving this empty so to skip base.html footer-->


    <!-- Summernote Initialization -->
    <script>
      $(document).ready(function () {
        $("#summernote").summernote({
          height: 300,
          toolbar: [
            ["style", ["style"]],
            ["font", ["bold", "italic", "underline", "clear"]],
            ["fontname", ["fontname"]],
            ["fontsize", ["fontsize"]],
            ["color", ["color"]],
            ["para", ["ul", "ol", "paragraph"]],
            ["insert", ["link", "picture", "video", "table", "hr"]],
            ["view", ["fullscreen", "codeview", "help"]],
            ["custom", ["codeblock"]],
          ],
          buttons: {
            codeblock: function (context) {
              var ui = $.summernote.ui;
              var button = ui.button({
                contents: '<i class="fa fa-code"></i> Code Block',
                tooltip: "Insert Code Block",
                click: function () {
                  let lang = prompt(
                    "Enter language (e.g. python, javascript, java, html, css):",
                    "python"
                  );
                  if (!lang) lang = "plaintext";

                  var codeBlock = `
                <pre><code class="language-${lang}" contenteditable="true" style="white-space: pre-wrap;"></code></pre>
              `;
                  context.invoke("editor.pasteHTML", codeBlock);
                  hljs.highlightAll();
                  var codeBlockNode =
                    context.invoke("editor.getBody").lastChild;
                  $(codeBlockNode).find("code").focus();
                },
              });
              return button.render();
            },
          },
        });

        // Auto-highlight on Enter inside code blocks
        $(".note-editable").on("keyup", function (e) {
          if (e.key === "Enter") {
            $(this)
              .find("pre code")
              .each(function () {
                hljs.highlightElement(this);
              });
          }
        });

        hljs.highlightAll();
      });
    </script>
  
        <h4>Comments</h4>
        <div class="comment-container">
            <p>Loading comments...</p>
        </div>

        <script>
        (function () {
          const form = document.querySelector("form");
          const commentsContainer = document.querySelector(".comment-container");
          if (!form || !commentsContainer) return;

          const slug = "java-mysql-tutorial-crud-operations";
          const submitBtn = form.querySelector("button[type='submit']");

          form.addEventListener("submit", function (e) {
            e.preventDefault();
            const data = {
              slug,
              name: form.name.value.trim(),
              content: form.content.value.trim(),
              parent_id: form.parent_id.value || null,
            };

            if (!data.name || !data.content) {
              alert("Please fill in your name and comment.");
              return;
            }

            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = "Posting...";

            fetch("/.netlify/functions/submit_comment", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),
            })
            .then(res => {
              submitBtn.disabled = false;
              submitBtn.textContent = originalText;
              if (res.ok) {
                alert("Comment submitted!");
                form.reset();
                loadComments();
              } else {
                return res.text().then(text => alert("Failed: " + text));
              }
            })
            .catch(err => {
              submitBtn.disabled = false;
              submitBtn.textContent = originalText;
              alert("Error: " + err.message);
            });
          });

          function loadComments() {
            fetch(`/.netlify/functions/get_comments?slug=${encodeURIComponent(slug)}`)
              .then(res => {
                if (!res.ok) throw new Error("Failed to load comments");
                return res.json();
              })
              .then(comments => {
                commentsContainer.innerHTML = "";
                const map = {};
                comments.forEach(c => {
                  c.children = [];
                  map[c.id] = c;
                });
                comments.forEach(c => {
                  if (c.parent_id && map[c.parent_id]) {
                    map[c.parent_id].children.push(c);
                  }
                });

                const render = (comment) => {
                  const wrapper = document.createElement("div");
                  wrapper.className = "comment-container";

                  const header = document.createElement("div");
                  header.className = "comment-header";
                  header.innerHTML = `<strong>${escapeHtml(comment.name)}</strong><span class="comment-timestamp"> - ${new Date(comment.timestamp).toLocaleString()}</span>`;
                  wrapper.appendChild(header);

                  const content = document.createElement("div");
                  content.className = "comment-content";
                  content.textContent = comment.content;
                  wrapper.appendChild(content);

                  const replyLink = document.createElement("span");
                  replyLink.className = "reply-link";
                  replyLink.textContent = "Reply";
                  replyLink.onclick = () => toggleReplyForm(`reply-form-${comment.id}`);
                  wrapper.appendChild(replyLink);

                  const replyForm = document.createElement("form");
                  replyForm.method = "POST";
                  replyForm.className = "reply-form";
                  replyForm.id = `reply-form-${comment.id}`;
                  replyForm.innerHTML = `
                    <input type="hidden" name="parent_id" value="${comment.id}" />
                    <input type="text" name="name" placeholder="Your Name" class="form-control form-control-sm" required />
                    <textarea name="content" placeholder="Write a reply..." class="form-control form-control-sm" rows="2" required></textarea>
                    <button type="submit" class="btn btn-sm btn-primary">Post Reply</button>
                  `;
                  replyForm.addEventListener("submit", function (e) {
                    e.preventDefault();
                    const replyData = {
                      slug,
                      name: replyForm.name.value.trim(),
                      content: replyForm.content.value.trim(),
                      parent_id: comment.id,
                    };

                    if (!replyData.name || !replyData.content) {
                      alert("Please fill in your name and reply.");
                      return;
                    }

                    const replyBtn = replyForm.querySelector("button");
                    const originalText = replyBtn.textContent;
                    replyBtn.disabled = true;
                    replyBtn.textContent = "Posting...";

                    fetch("/.netlify/functions/submit_comment", {
                      method: "POST",
                      headers: {
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify(replyData),
                    })
                      .then(res => {
                        replyBtn.disabled = false;
                        replyBtn.textContent = originalText;
                        if (res.ok) {
                          alert("Reply submitted!");
                          replyForm.reset();
                          replyForm.style.display = "none";
                          loadComments();
                        } else {
                          return res.text().then(text => alert("Failed: " + text));
                        }
                      })
                      .catch(err => {
                        replyBtn.disabled = false;
                        replyBtn.textContent = originalText;
                        alert("Error: " + err.message);
                      });
                  });
                  wrapper.appendChild(replyForm);

                  if (comment.children.length) {
                    const nested = document.createElement("div");
                    nested.className = "nested-replies";
                    comment.children.forEach(child => nested.appendChild(render(child)));
                    wrapper.appendChild(nested);
                  }

                  return wrapper;
                };

                const topLevel = comments.filter(c => !c.parent_id);
                if (topLevel.length === 0) {
                  commentsContainer.innerHTML = "<p>No comments yet. Be the first to comment!</p>";
                } else {
                  topLevel.forEach(c => commentsContainer.appendChild(render(c)));
                }
              })
              .catch(err => {
                commentsContainer.innerHTML = "<p>Failed to load comments.</p>";
                console.error(err);
              });
          }

          function toggleReplyForm(id) {
            const form = document.getElementById(id);
            if (form) {
              const isHidden = window.getComputedStyle(form).display === "none";
              form.style.display = isHidden ? "block" : "none";
            }
          }

          function escapeHtml(text) {
            return text
              .replace(/&/g, "&amp;")
              .replace(/</g, "&lt;")
              .replace(/>/g, "&gt;")
              .replace(/"/g, "&quot;")
              .replace(/'/g, "&#039;");
          }

          loadComments();
        })();
        </script>
        
</body>
</html>
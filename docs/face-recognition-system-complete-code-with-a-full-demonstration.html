<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>IGTechTeam</title>

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      href="/static/images/favicon.png"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />

    <!-- Summernote CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.css"
      rel="stylesheet"
    />

    <!-- Highlight.js -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

    <!-- Font Awesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <!-- jQuery & Summernote JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.18/summernote-lite.min.js"></script>

    <!-- Bootstrap JS (for navbar toggle) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <style>
      body {
        background-color: #e6f0f7;
        font-family: "Segoe UI", sans-serif;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }

      .navbar {
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 1000;
        background-color: #1f2c39;
      }

      .navbar-brand {
        font-weight: bold;
        font-size: 1.4rem;
        color: #fff !important;
      }

      .navbar-nav .nav-link {
        color: #f8f9fa !important;
        font-weight: 500;
        padding: 8px 16px;
      }

      .navbar-nav .nav-link:hover {
        background-color: #485768;
        border-radius: 5px;
      }

      .navbar-nav .btn {
        border-radius: 8px;
        transition: all 0.2s ease;
      }

      .navbar-nav .btn:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .alert-warning {
        margin-top: 1rem;
        font-weight: 500;
        border-left: 6px solid #ffc107;
        background-color: #fff8e1;
      }

      .alert-danger {
        margin-top: 1rem;
      }

      .post-card {
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
        padding: 1rem;
      }

      .post-title {
        font-size: 1.75rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: #343a40;
      }

      /* Images in post content - full width only on mobile */
      @media (max-width: 1024px) {
        .post-content img[style] {
          width: 100% !important;
        }
      }

      .featured-image-container {
        display: flex;
        justify-content: center;
        align-items: center;
        max-width: 100%;
        aspect-ratio: 3 / 2;
        border-radius: 8px;
        overflow: hidden;
      }

      .featured-img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      .badge {
        font-size: 0.875rem;
        font-weight: 600;
        padding: 5px 10px;
      }

      .text-dark {
        text-decoration: none;
      }

      /* Fix maximize fullscreen issue in Summernote */
      .note-editor.fullscreen {
        z-index: 9999 !important;
        position: fixed !important;
        top: 0;
        left: 0;
        width: 100% !important;
        height: 100% !important;
        background: white !important;
        overflow: auto;
      }

      body.note-editor-fullscreen {
        overflow: hidden;
      }

      .social-icons {
        padding-bottom: 10px;
      }

      .social-icons a {
        color: #f8f9fa;
        font-size: 1.5rem;
        margin: 0 10px;
        transition: all 0.3s ease;
      }

      .social-icons a:hover {
        color: #007bff;
        transform: scale(1.2);
      }

      .page-content{
        flex: 1;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md navbar-light sticky-top">
      <div class="container">
        <a class="navbar-brand" href="/">
          IGTechTeam
        </a>

        <!-- Mobile toggle button -->
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarContent"
          aria-controls="navbarContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarContent">
          <div class="navbar-nav mr-auto">
            
            <a class="nav-link" href="/contact.html"
              >Contact</a
            >
            <a class="nav-link" href="/about.html">About me</a>
          </div>

          <div class="navbar-nav ml-auto d-flex align-items-center">
            <a
              class="btn btn-light px-4 py-2 fw-semibold shadow-sm mr-2"
              href="/login.html"
            >
              Login
            </a>

            
          </div>
        </div>
      </div>
    </nav>

    <!-- Site Notice -->
    <div class="container text-center">
      <div class="alert alert-warning" role="alert">
        ðŸš§ Website construction is going on! Please check back later. ðŸš§
      </div>
    </div>

    <!-- Flash Messages -->
    <div class="container">
      
    </div>

    <!-- Page Content -->
    <div class="container page-content">

<!-- Post Header -->
<header
  class="post-header"
  style="
    background: linear-gradient(135deg, #1d2b64, #f8cdda);
    color: white;
    padding: 2.5rem;
    border-radius: 16px 16px 0 0;
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    text-align: center;
  "
>
  <h1
    style="
      font-size: 2.8rem;
      font-weight: bold;
      color: white;
      -webkit-text-stroke: 1px black;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);
      letter-spacing: 1px;
      text-align: center;
      margin-bottom: 1rem;
    "
  >
    Face Recognition System Complete Code with a full demonstration
  </h1>

  <span
    style="
      background: rgba(255, 255, 255, 0.2);
      padding: 0.4rem 1rem;
      border-radius: 20px;
      font-size: 0.95rem;
    "
  >
    ðŸ•’ 2025-04-21 09:14:50.117231
  </span>
</header>

<!-- Post Body -->
<div
  class="post-content"
  style="
    padding: 2rem;
    background: #ffffff;
    border-radius: 0 0 16px 16px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
    margin-top: -1px;
  "
>
  <p><p class="has-text-align-right wp-embed-aspect-16-9 wp-has-aspect-ratio" style="text-align: justify;"><img src="https://drive.google.com/thumbnail?id=17BXt2EdIxovW2CLRpwO1Cc-Yl9Gs4cux&amp;sz=w1000" data-filename="frs-featured-image.png" style="width: 50%;"><span style="font-size: 1rem; text-align: left;"><br></span></p><p class="has-text-align-right wp-embed-aspect-16-9 wp-has-aspect-ratio" style="text-align: justify;"><span style="font-size: 1rem; text-align: left;">Face Recognition System is one of the most popular Python, Machine Learning, and Deep Learning projects.</span></p><h2 class="wp-block-heading">What will you learn?</h2><ol class="wp-block-list"><!-- wp:list-item -->
<li><a href="#demo">Watch the demo video to get an idea of a project</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#part-1">Part 1: Generate dataset</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#part-2">Part 2: Train the classifier and save it</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#part-3">Part 3: Face detection/recognition</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#part-4">Part 4 (Converting the project into GUI)</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#part-5">Part 5: (Connecting project to the database)</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#part-6">(Extra )Part 6. GUI Face Recognition system using Tkinter-canvas</a></li>
<!-- /wp:list-item -->

<!-- wp:list-item -->
<li><a href="#application">Converting the project into a setup (Application) file</a></li>
<!-- /wp:list-item --></ol><h2 class="wp-block-heading" id="demo">Demo:</h2><p><iframe frameborder="0" src="//www.youtube.com/embed/5soarMq7LZ0" width="640" height="360" class="note-video-clip"></iframe><br></p><p class="has-text-align-right" style="text-align: right; "><strong><a rel="noreferrer noopener" href="/face-recognition-system-complete-documentation" target="_blank">View Complete Documentation</a></strong></p><h2 class="wp-block-heading"><strong id="part-1">Part 1:</strong> Generate dataset</h2><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><iframe frameborder="0" src="//www.youtube.com/embed/oDaZrqJ2zoo" width="640" height="360" class="note-video-clip"></iframe><span style="font-size: 1rem;"><br></span></div><div class="wp-block-embed__wrapper"><span style="font-size: 1rem;">In Part 1, I must create the dataset. That implies I'll have to gather pictures. The Open-CV package can be used for this. To install this package, open any terminal and type:</span></div></figure><p><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-luminous-vivid-amber-color"><code>pip install opencv-python</code></mark></p><p>I am using&nbsp;the haarcascade_frontalface_default&nbsp;xml file to get the coordinates of my face so that I can crop it and use it to make a dataset and for future prediction.</p><p>I need to convert my RGB (Red, Green, Blue) images to grayscale. An RGB image has three channels, whereas a grayscale image has only one. It&nbsp;minimizes a lot of complexity when an image is converted to grayscale. The coordinates can then be obtained by utilizing the face classifier and the detectMultiScale technique. We must pass the scaling factor as well as the minimal neighbors. The scale factor is the factor that determines how much to modify from the original image. The number of minimum neighbors indicates how many faces to detect. A greater value yields less detection but of higher quality. We must experiment with this value. We can alter these parameters depending on our results.&nbsp;Then we simply collect the image and terminate the execution when it reaches 200 images or when we press the Enter key on the keyboard.</p><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-comment">## pip install opencv-python</span>
<span class="hljs-keyword">import</span> cv2

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_dataset</span>():
    face_classifier = cv2.CascadeClassifier(<span class="hljs-string">"haarcascade_frontalface_default.xml"</span>)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">face_cropped</span>(<span class="hljs-params">img</span>):
        gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
        faces = face_classifier.detectMultiScale(gray, <span class="hljs-number">1.3</span>, <span class="hljs-number">5</span>)
        <span class="hljs-comment"># scaling factor = 1.3</span>
        <span class="hljs-comment"># minimum neighbor = 5</span>
        
        <span class="hljs-keyword">if</span> faces <span class="hljs-keyword">is</span> ():
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">for</span> (x,y,w,h) <span class="hljs-keyword">in</span> faces:
            cropped_face = img[y:y+h,x:x+w]
        <span class="hljs-keyword">return</span> cropped_face
    
    cap = cv2.VideoCapture(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">id</span> =<span class="hljs-number">1</span>
    img_id = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        ret, frame = cap.read()
        <span class="hljs-keyword">if</span> face_cropped(frame) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            img_id+=<span class="hljs-number">1</span>
            face = cv2.resize(face_cropped(frame), (<span class="hljs-number">200</span>,<span class="hljs-number">200</span>))
            face = cv2.cvtColor(face, cv2.COLOR_BGR2GRAY)
            file_name_path = <span class="hljs-string">"data/user."</span>+<span class="hljs-built_in">str</span>(<span class="hljs-built_in">id</span>)+<span class="hljs-string">"."</span>+<span class="hljs-built_in">str</span>(img_id)+<span class="hljs-string">".jpg"</span>
            cv2.imwrite(file_name_path, face)
            cv2.putText(face, <span class="hljs-built_in">str</span>(img_id), (<span class="hljs-number">50</span>,<span class="hljs-number">50</span>), cv2.FONT_HERSHEY_COMPLEX, <span class="hljs-number">1</span>, (<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>), <span class="hljs-number">2</span>)
            
            cv2.imshow(<span class="hljs-string">"Cropped face"</span>, face)
            
        <span class="hljs-keyword">if</span> cv2.waitKey(<span class="hljs-number">1</span>)==<span class="hljs-number">13</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">int</span>(img_id)==<span class="hljs-number">200</span>: <span class="hljs-comment">#13 is the ASCII character of Enter</span>
            <span class="hljs-keyword">break</span>
            
    cap.release()
    cv2.destroyAllWindows()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Collecting samples is completed...."</span>)
generate_dataset()</code></pre><pre class="wp-block-syntaxhighlighter-code"></pre><h2 class="wp-block-heading" id="part-2">Part 2: Train the classifier and save it</h2><p><iframe frameborder="0" src="//www.youtube.com/embed/YYsT2LkaUSQ" width="640" height="360" class="note-video-clip"></iframe><br></p><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><span style="font-size: 1rem;">The next step is to train the classifier. Our system doesn't understand images, right? It needs to be converted into a Numpy array format so that it can make certain decisions based on this data. This part generates the classifier.xml file, which contains specific data (information) about our faces.</span></div></figure><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image <span class="hljs-comment">#pip install pillow</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np    <span class="hljs-comment"># pip install numpy</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">train_classifier</span>(<span class="hljs-params">data_dir</span>):
    path = [os.path.join(data_dir, f) <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.listdir(data_dir)]
    
    faces = []
    ids = []
    
    <span class="hljs-keyword">for</span> image <span class="hljs-keyword">in</span> path:
        img = Image.<span class="hljs-built_in">open</span>(image).convert(<span class="hljs-string">'L'</span>)
        imageNp = np.array(img, <span class="hljs-string">'uint8'</span>)
        <span class="hljs-built_in">id</span> = <span class="hljs-built_in">int</span>(os.path.split(image)[<span class="hljs-number">1</span>].split(<span class="hljs-string">"."</span>)[<span class="hljs-number">1</span>])
        
        faces.append(imageNp)
        ids.append(<span class="hljs-built_in">id</span>)
        
    ids = np.array(ids)
    
    <span class="hljs-comment"># Train and save classifier</span>
    clf = cv2.face.LBPHFaceRecognizer_create()
    clf.train(faces,ids)
    clf.write(<span class="hljs-string">"classifier.xml"</span>)
train_classifier(<span class="hljs-string">"data"</span>)</code></pre><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><span style="font-size: 1rem;"><br></span></div></figure><h2 class="wp-block-heading" id="part-3">Part 3: Face detection/recognition</h2><p><iframe frameborder="0" src="//www.youtube.com/embed/HSsAGzCWE88" width="640" height="360" class="note-video-clip"></iframe><br></p><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><span style="font-size: 1rem;">In this part, I am going to make a prediction. I have defined one function name draw_boundary, which draws a boundary around my face and also displays my name at the top of my face. There are two identity persons 'Ishwar' and 'Manish'. Other than these two authorized persons, it will display 'UNKNOWN'.</span></div></figure><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_boundary</span>(<span class="hljs-params">img, classifier, scaleFactor, minNeighbors, color, text, clf</span>):
    gray_img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    features = classifier.detectMultiScale(gray_img, scaleFactor, minNeighbors)
    
    <span class="hljs-keyword">for</span> (x,y,w,h) <span class="hljs-keyword">in</span> features:
        cv2.rectangle(img, (x,y), (x+w,y+h), color, <span class="hljs-number">2</span> )
        
        <span class="hljs-built_in">id</span>, pred = clf.predict(gray_img[y:y+h,x:x+w])
        confidence = <span class="hljs-built_in">int</span>(<span class="hljs-number">100</span>*(<span class="hljs-number">1</span>-pred/<span class="hljs-number">300</span>))
        
        <span class="hljs-keyword">if</span> confidence&gt;<span class="hljs-number">70</span>:
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">id</span>==<span class="hljs-number">1</span>:
                cv2.putText(img, <span class="hljs-string">"Ishwar"</span>, (x,y-<span class="hljs-number">5</span>), cv2.FONT_HERSHEY_SIMPLEX, <span class="hljs-number">0.8</span>, color, <span class="hljs-number">1</span>, cv2.LINE_AA)
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">id</span>==<span class="hljs-number">2</span>:
                cv2.putText(img, <span class="hljs-string">"Manish"</span>, (x,y-<span class="hljs-number">5</span>), cv2.FONT_HERSHEY_SIMPLEX, <span class="hljs-number">0.8</span>, color, <span class="hljs-number">1</span>, cv2.LINE_AA)
        <span class="hljs-keyword">else</span>:
            cv2.putText(img, <span class="hljs-string">"UNKNOWN"</span>, (x,y-<span class="hljs-number">5</span>), cv2.FONT_HERSHEY_SIMPLEX, <span class="hljs-number">0.8</span>, (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>), <span class="hljs-number">1</span>, cv2.LINE_AA)
    
    <span class="hljs-keyword">return</span> img

<span class="hljs-comment"># loading classifier</span>
faceCascade = cv2.CascadeClassifier(<span class="hljs-string">"haarcascade_frontalface_default.xml"</span>)

clf = cv2.face.LBPHFaceRecognizer_create()
clf.read(<span class="hljs-string">"classifier.xml"</span>)

video_capture = cv2.VideoCapture(<span class="hljs-number">1</span>)

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    ret, img = video_capture.read()
    img = draw_boundary(img, faceCascade, <span class="hljs-number">1.3</span>, <span class="hljs-number">6</span>, (<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>), <span class="hljs-string">"Face"</span>, clf)
    cv2.imshow(<span class="hljs-string">"face Detection"</span>, img)
    
    <span class="hljs-keyword">if</span> cv2.waitKey(<span class="hljs-number">1</span>)==<span class="hljs-number">13</span>:
        <span class="hljs-keyword">break</span>
video_capture.release()
cv2.destroyAllWindows()</code></pre><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><span style="font-size: 1rem;"><br></span></div></figure><h2 class="wp-block-heading"><strong id="part-4">Part 4 (Converting the above project into GUI):</strong></h2><p>(If you don't know about GUI, you must have to watch this video first:&nbsp;<a href="https://youtu.be/FclrlobIOXM" target="_blank" rel="noreferrer noopener">GUI using Tkinter</a>)</p><p>Now let's convert the above project into a GUI application.</p><p><iframe frameborder="0" src="//www.youtube.com/embed/zJLxQ4fT_YQ" width="640" height="360" class="note-video-clip"></iframe><br></p><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><span style="font-size: 1rem;">Why should we change our project to a graphical user interface? It is essential to transform any of our Python projects into a graphical user interface (GUI) if we intend to submit our code to our college or any place else. It's because we can do anything within the same window, right? We don't need to run each cell of code repeatedly.</span></div></figure><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">import</span> tkinter <span class="hljs-keyword">as</span> tk
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox

window = tk.Tk()
window.title(<span class="hljs-string">"Face Recognition system"</span>)

l1 = tk.Label(window, text=<span class="hljs-string">"Name"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>))
l1.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">0</span>)
t1 = tk.Entry(window, width=<span class="hljs-number">50</span>, bd=<span class="hljs-number">5</span>)
t1.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">0</span>)

l2 = tk.Label(window, text=<span class="hljs-string">"Age"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>))
l2.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">1</span>)
t2 = tk.Entry(window, width=<span class="hljs-number">50</span>, bd=<span class="hljs-number">5</span>)
t2.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">1</span>)

l3 = tk.Label(window, text=<span class="hljs-string">"Address"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>))
l3.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">2</span>)
t3 = tk.Entry(window, width=<span class="hljs-number">50</span>, bd=<span class="hljs-number">5</span>)
t3.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">2</span>)


b1 = tk.Button(window, text=<span class="hljs-string">"Training"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>),bg=<span class="hljs-string">"orange"</span>,fg=<span class="hljs-string">"red"</span>)
b1.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">4</span>)

b2 = tk.Button(window, text=<span class="hljs-string">"Detect the faces"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>), bg=<span class="hljs-string">"green"</span>, fg=<span class="hljs-string">"orange"</span>)
b2.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">4</span>)

b3 = tk.Button(window, text=<span class="hljs-string">"Generate dataset"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>), bg=<span class="hljs-string">"pink"</span>, fg=<span class="hljs-string">"black"</span>)
b3.grid(column=<span class="hljs-number">2</span>, row=<span class="hljs-number">4</span>)

window.geometry(<span class="hljs-string">"800x200"</span>)
window.mainloop()

<span class="hljs-comment">#other just copy code from previous part same like as I have done in this video</span></code></pre><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><span style="font-size: 1rem;"><br></span></div></figure><h2 class="wp-block-heading" id="part-5"><strong>Part 5: (Connecting this project to the database)</strong></h2><p>(If you don't know how to connect any Python project to the database, you must have to watch this video first:&nbsp;<a href="https://youtu.be/-mVaBwBLgUg" target="_blank" rel="noreferrer noopener">Connect Python to the database</a>)</p><p>Let's now link our project to the database:</p><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><iframe frameborder="0" src="//www.youtube.com/embed/WVDf5QDBcD0" width="640" height="360" class="note-video-clip"></iframe><br></div></figure><p>In the preceding section, we just printed the authorized user's name. But this is not a good practice. We must save the user's information in the database. So, you must understand how to connect Python to a database. The user's information is now derived from the database rather than the code.</p><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">import</span> tkinter <span class="hljs-keyword">as</span> tk
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox
<span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> mysql.connector</code></pre><pre><code class="language-python hljs" contenteditable="true" style="">window=tk.Tk()
window.title(<span class="hljs-string">"Face recognition system"</span>)
<span class="hljs-comment">#window.config(background="lime")</span>
l1=tk.Label(window,text=<span class="hljs-string">"Name"</span>,font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>))
l1.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">0</span>)
t1=tk.Entry(window,width=<span class="hljs-number">50</span>,bd=<span class="hljs-number">5</span>)
t1.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">0</span>)

l2=tk.Label(window,text=<span class="hljs-string">"Age"</span>,font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>))
l2.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">1</span>)
t2=tk.Entry(window,width=<span class="hljs-number">50</span>,bd=<span class="hljs-number">5</span>)
t2.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">1</span>)

l3=tk.Label(window,text=<span class="hljs-string">"Address"</span>,font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>))
l3.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">2</span>)
t3=tk.Entry(window,width=<span class="hljs-number">50</span>,bd=<span class="hljs-number">5</span>)
t3.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">2</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">train_classifier</span>():
    data_dir=<span class="hljs-string">"C:/Users/Ishwar Gautam/Desktop/Face recognizer/data"</span>
    path = [os.path.join(data_dir,f) <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.listdir(data_dir)]
    faces  = []
    ids   = []
    
    <span class="hljs-keyword">for</span> image <span class="hljs-keyword">in</span> path:
        img = Image.<span class="hljs-built_in">open</span>(image).convert(<span class="hljs-string">'L'</span>);
        imageNp= np.array(img, <span class="hljs-string">'uint8'</span>)
        <span class="hljs-built_in">id</span> = <span class="hljs-built_in">int</span>(os.path.split(image)[<span class="hljs-number">1</span>].split(<span class="hljs-string">"."</span>)[<span class="hljs-number">1</span>])
        
        faces.append(imageNp)
        ids.append(<span class="hljs-built_in">id</span>)
    ids = np.array(ids)
    
    <span class="hljs-comment">#Train the classifier and save</span>
    clf = cv2.face.LBPHFaceRecognizer_create()
    clf.train(faces,ids)
    clf.write(<span class="hljs-string">"classifier.xml"</span>)
    messagebox.showinfo(<span class="hljs-string">'Result'</span>,<span class="hljs-string">'Training dataset completed!!!'</span>)
    
b1=tk.Button(window,text=<span class="hljs-string">"Training"</span>,font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>),bg=<span class="hljs-string">'orange'</span>,fg=<span class="hljs-string">'red'</span>,command=train_classifier)
b1.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">4</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_face</span>():
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_boundary</span>(<span class="hljs-params">img,classifier,scaleFactor,minNeighbors,color,text,clf</span>):
        gray_image = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
        features = classifier.detectMultiScale(gray_image,scaleFactor,minNeighbors)

        coords = []

        <span class="hljs-keyword">for</span>(x,y,w,h) <span class="hljs-keyword">in</span> features:
            cv2.rectangle(img,(x,y),(x+w,y+h),color,<span class="hljs-number">2</span>)
            <span class="hljs-built_in">id</span>,pred = clf.predict(gray_image[y:y+h,x:x+w])
            confidence = <span class="hljs-built_in">int</span>(<span class="hljs-number">100</span>*(<span class="hljs-number">1</span>-pred/<span class="hljs-number">300</span>))
            
            mydb=mysql.connector.connect(
            host=<span class="hljs-string">"localhost"</span>,
            user=<span class="hljs-string">"root"</span>,
            passwd=<span class="hljs-string">""</span>,
            database=<span class="hljs-string">"Authorized_user"</span>
            )
            mycursor=mydb.cursor()
            mycursor.execute(<span class="hljs-string">"select name from my_table where id="</span>+<span class="hljs-built_in">str</span>(<span class="hljs-built_in">id</span>))
            s = mycursor.fetchone()
            s = <span class="hljs-string">''</span>+<span class="hljs-string">''</span>.join(s)
            
            <span class="hljs-keyword">if</span> confidence&gt;<span class="hljs-number">74</span>:
                cv2.putText(img,s,(x,y-<span class="hljs-number">5</span>),cv2.FONT_HERSHEY_SIMPLEX,<span class="hljs-number">0.8</span>,color,<span class="hljs-number">1</span>,cv2.LINE_AA)   
            <span class="hljs-keyword">else</span>:
                cv2.putText(img,<span class="hljs-string">"UNKNOWN"</span>,(x,y-<span class="hljs-number">5</span>),cv2.FONT_HERSHEY_SIMPLEX,<span class="hljs-number">0.8</span>,(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>),<span class="hljs-number">1</span>,cv2.LINE_AA)

            coords=[x,y,w,h]
        <span class="hljs-keyword">return</span> coords
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">recognize</span>(<span class="hljs-params">img,clf,faceCascade</span>):
        coords = draw_boundary(img,faceCascade,<span class="hljs-number">1.1</span>,<span class="hljs-number">10</span>,(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>),<span class="hljs-string">"Face"</span>,clf)
        <span class="hljs-keyword">return</span> img

    faceCascade=cv2.CascadeClassifier(<span class="hljs-string">"haarcascade_frontalface_default.xml"</span>)
    clf = cv2.face.LBPHFaceRecognizer_create()
    clf.read(<span class="hljs-string">"classifier.xml"</span>)

    video_capture =  cv2.VideoCapture(<span class="hljs-number">0</span>)

    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        ret,img = video_capture.read()
        img=  recognize(img,clf,faceCascade)
        cv2.imshow(<span class="hljs-string">"face detection"</span>,img)

        <span class="hljs-keyword">if</span> cv2.waitKey(<span class="hljs-number">1</span>)==<span class="hljs-number">13</span>:
            <span class="hljs-keyword">break</span>

    video_capture.release()
    cv2.destroyAllWindows()

b2=tk.Button(window,text=<span class="hljs-string">"Detect the face"</span>,font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>),bg=<span class="hljs-string">'green'</span>,fg=<span class="hljs-string">'white'</span>,command=detect_face)
b2.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">4</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_dataset</span>():
    <span class="hljs-keyword">if</span>(t1.get()==<span class="hljs-string">""</span> <span class="hljs-keyword">or</span> t2.get()==<span class="hljs-string">""</span> <span class="hljs-keyword">or</span> t3.get()==<span class="hljs-string">""</span>):
        messagebox.showinfo(<span class="hljs-string">'Result'</span>,<span class="hljs-string">'Please provide complete details of the user'</span>)
    <span class="hljs-keyword">else</span>:
        mydb=mysql.connector.connect(
        host=<span class="hljs-string">"localhost"</span>,
        user=<span class="hljs-string">"root"</span>,
        passwd=<span class="hljs-string">""</span>,
        database=<span class="hljs-string">"Authorized_user"</span>
        )
        mycursor=mydb.cursor()
        mycursor.execute(<span class="hljs-string">"SELECT * from my_table"</span>)
        myresult=mycursor.fetchall()
        <span class="hljs-built_in">id</span>=<span class="hljs-number">1</span>
        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> myresult:
            <span class="hljs-built_in">id</span>+=<span class="hljs-number">1</span>
        sql=<span class="hljs-string">"insert into my_table(id,Name,Age,Address) values(%s,%s,%s,%s)"</span>
        val=(<span class="hljs-built_in">id</span>,t1.get(),t2.get(),t3.get())
        mycursor.execute(sql,val)
        mydb.commit()
        
        face_classifier = cv2.CascadeClassifier(<span class="hljs-string">"haarcascade_frontalface_default.xml"</span>)
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">face_cropped</span>(<span class="hljs-params">img</span>):
            gray  = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
            faces = face_classifier.detectMultiScale(gray,<span class="hljs-number">1.3</span>,<span class="hljs-number">5</span>)
            <span class="hljs-comment">#scaling factor=1.3</span>
            <span class="hljs-comment">#Minimum neighbor = 5</span>

            <span class="hljs-keyword">if</span> faces <span class="hljs-keyword">is</span> ():
                <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
            <span class="hljs-keyword">for</span>(x,y,w,h) <span class="hljs-keyword">in</span> faces:
                cropped_face=img[y:y+h,x:x+w]
            <span class="hljs-keyword">return</span> cropped_face

        cap = cv2.VideoCapture(<span class="hljs-number">0</span>)
        img_id=<span class="hljs-number">0</span>

        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            ret,frame = cap.read()
            <span class="hljs-keyword">if</span> face_cropped(frame) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
                img_id+=<span class="hljs-number">1</span>
                face = cv2.resize(face_cropped(frame),(<span class="hljs-number">200</span>,<span class="hljs-number">200</span>))
                face  = cv2.cvtColor(face, cv2.COLOR_BGR2GRAY)
                file_name_path = <span class="hljs-string">"data/user."</span>+<span class="hljs-built_in">str</span>(<span class="hljs-built_in">id</span>)+<span class="hljs-string">"."</span>+<span class="hljs-built_in">str</span>(img_id)+<span class="hljs-string">".jpg"</span>
                cv2.imwrite(file_name_path,face)
                cv2.putText(face,<span class="hljs-built_in">str</span>(img_id),(<span class="hljs-number">50</span>,<span class="hljs-number">50</span>),cv2.FONT_HERSHEY_COMPLEX,<span class="hljs-number">1</span>, (<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),<span class="hljs-number">2</span>)
                <span class="hljs-comment"># (50,50) is the origin point from where text is to be written</span>
                <span class="hljs-comment"># font scale=1</span>
                <span class="hljs-comment">#thickness=2</span>

                cv2.imshow(<span class="hljs-string">"Cropped face"</span>,face)
                <span class="hljs-keyword">if</span> cv2.waitKey(<span class="hljs-number">1</span>)==<span class="hljs-number">13</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">int</span>(img_id)==<span class="hljs-number">200</span>:
                    <span class="hljs-keyword">break</span>
        cap.release()
        cv2.destroyAllWindows()
        messagebox.showinfo(<span class="hljs-string">'Result'</span>,<span class="hljs-string">'Generating dataset completed!!!'</span>)

b3=tk.Button(window,text=<span class="hljs-string">"Generate dataset"</span>,font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>),bg=<span class="hljs-string">'pink'</span>,fg=<span class="hljs-string">'black'</span>,command=generate_dataset)
b3.grid(column=<span class="hljs-number">2</span>, row=<span class="hljs-number">4</span>)

window.geometry(<span class="hljs-string">"800x200"</span>)
window.mainloop()</code></pre><h2 class="wp-block-heading wp-embed-aspect-16-9 wp-has-aspect-ratio" id="part-6">Part 6. GUI Face Recognition system using Tkinter-canvas</h2><p class="wp-embed-aspect-16-9 wp-has-aspect-ratio">This is an extra step to make an awesome GUI application.</p><p>(<strong>Note:</strong> This part is clearly explained in the <a href="https://youtu.be/tqhSmMfu3Xc" target="_blank" rel="noreferrer noopener">Nepali language Face Recognition Video</a>.)</p><pre><code class="language-python hljs" contenteditable="true" style=""><span class="hljs-keyword">import</span> tkinter <span class="hljs-keyword">as</span> tk
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image, ImageTk
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> mysql.connector
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox</code></pre><h2 class="wp-block-heading wp-embed-aspect-16-9 wp-has-aspect-ratio"><strong>Divide window</strong></h2><pre><code class="language-python hljs" contenteditable="true" style="">window = tk.Tk()
window.title(<span class="hljs-string">"Project"</span>)
window.resizable(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)

load1 = Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">"header.png"</span>)
photo1 = ImageTk.PhotoImage(load1)


header = tk.Button(window, image=photo1)
header.place(x=<span class="hljs-number">5</span>, y=<span class="hljs-number">0</span>)

canvas1 = Canvas(window, width = <span class="hljs-number">500</span>, height=<span class="hljs-number">250</span>, bg=<span class="hljs-string">'ivory'</span>)
canvas1.place(x=<span class="hljs-number">5</span>, y=<span class="hljs-number">120</span>)

l1 = tk.Button(canvas1, text=<span class="hljs-string">"Name"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">15</span>))
l1.place(x=<span class="hljs-number">5</span>, y=<span class="hljs-number">5</span>)
t1 = tk.Entry(canvas1, width=<span class="hljs-number">50</span>, bd=<span class="hljs-number">5</span>)
t1.place(x=<span class="hljs-number">150</span>, y=<span class="hljs-number">10</span>)

l2 = tk.Button(canvas1, text=<span class="hljs-string">"Age"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">15</span>))
l2.place(x=<span class="hljs-number">5</span>, y=<span class="hljs-number">50</span>)
t2 = tk.Entry(canvas1, width=<span class="hljs-number">50</span>, bd=<span class="hljs-number">5</span>)
t2.place(x=<span class="hljs-number">150</span>, y=<span class="hljs-number">55</span>)

l3 = tk.Button(canvas1, text=<span class="hljs-string">"Address"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">15</span>))
l3.place(x=<span class="hljs-number">5</span>, y=<span class="hljs-number">100</span>)
t3 = tk.Entry(canvas1, width=<span class="hljs-number">50</span>, bd=<span class="hljs-number">5</span>)
t3.place(x=<span class="hljs-number">150</span>, y=<span class="hljs-number">105</span>)


b1= tk.Button(canvas1, text=<span class="hljs-string">"Training"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>), bg=<span class="hljs-string">'orange'</span>, fg=<span class="hljs-string">'red'</span>)
b1.place(x=<span class="hljs-number">10</span>, y=<span class="hljs-number">180</span>)

b2= tk.Button(canvas1, text=<span class="hljs-string">"Generate dataset"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>), bg=<span class="hljs-string">'pink'</span>, fg=<span class="hljs-string">'black'</span>)
b2.place(x=<span class="hljs-number">175</span>, y=<span class="hljs-number">180</span>)

load2= Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">"canvas2.png"</span>)
photo2 = ImageTk.PhotoImage(load2)

canvas2 =  Canvas(window, width=<span class="hljs-number">500</span>, height=<span class="hljs-number">250</span>)
canvas2.place(x=<span class="hljs-number">5</span>, y=<span class="hljs-number">400</span>)
canvas2.create_image(<span class="hljs-number">250</span>,<span class="hljs-number">125</span>,image=photo2)

b3 = tk.Button(canvas2, text=<span class="hljs-string">"Capture the image"</span>, font=(<span class="hljs-string">"Algerian"</span>,<span class="hljs-number">20</span>), bg=<span class="hljs-string">"gray"</span>, fg=<span class="hljs-string">"black"</span>)
b3.place(x=<span class="hljs-number">5</span>, y=<span class="hljs-number">50</span>)

b4 = tk.Button(canvas2, text=<span class="hljs-string">"Predict face from live video"</span>, font=(<span class="hljs-string">"Algerian"</span>, <span class="hljs-number">20</span>), bg=<span class="hljs-string">"cyan"</span>, fg=<span class="hljs-string">"black"</span>)
b4.place(x=<span class="hljs-number">5</span>, y=<span class="hljs-number">150</span>)

load3= Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">'canvas3.png'</span>)
photo3 = ImageTk.PhotoImage(load3)

canvas3 = Canvas(window, width=<span class="hljs-number">280</span>, height=<span class="hljs-number">530</span>)
canvas3.place(x=<span class="hljs-number">515</span>, y=<span class="hljs-number">120</span>)
canvas3.create_image(<span class="hljs-number">140</span>, <span class="hljs-number">265</span>, image=photo3)

window.geometry(<span class="hljs-string">"800x680"</span>)
window.mainloop()</code></pre><h2 class="wp-block-heading" id="application"><strong><br></strong></h2><h2 class="wp-block-heading" id="application"><strong>Converting the </strong>above project into a <strong>setup (Application) file:</strong></h2><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper"><iframe frameborder="0" src="//www.youtube.com/embed/D6jXMw7STUQ" width="640" height="360" class="note-video-clip"></iframe><span style="font-size: 1rem;"><br></span></div><div class="wp-block-embed__wrapper"><span style="font-size: 1rem;">To run the code, you must launch your Python IDE, right? After this section, you won't need it anymore. Transform your entire project into an application or setup file. You can open this project just like any other application, such as a game.</span></div></figure><h2 class="wp-block-heading">Conclusion:</h2><p>In this way, you can make a complete Face Recognition System project. Make sure to watch each video step by step to prevent any errors. This post illustrates how you can make a Face recognition project with the OpenCV library. If you are searching for making this project using deep learning, you can click <a href="/face-recognition-system-using-deep-learning-complete-project" target="_blank" rel="noreferrer noopener">here</a>.</p><p><!-- wp:paragraph {"align":"right","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:list {"ordered":true} -->

<!-- /wp:list -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:embed {"url":"https://youtu.be/5soarMq7LZ0","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:embed -->

<!-- wp:paragraph {"align":"right"} -->

<!-- /wp:paragraph -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:embed {"url":"https://youtu.be/oDaZrqJ2zoo","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:embed -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:embed {"url":"https://youtu.be/YYsT2LkaUSQ","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:embed -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:embed {"url":"https://youtu.be/HSsAGzCWE88","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:embed -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:embed {"url":"https://youtu.be/zJLxQ4fT_YQ","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:embed -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:embed {"url":"https://youtu.be/WVDf5QDBcD0","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:embed -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code {"language":"python"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:heading -->

<!-- wp:paragraph {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading {"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:heading -->

<!-- wp:syntaxhighlighter/code {"language":"python","className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:embed {"url":"https://youtu.be/D6jXMw7STUQ","type":"video","providerNameSlug":"youtube","responsive":true,"className":"wp-embed-aspect-16-9 wp-has-aspect-ratio"} -->

<!-- /wp:embed -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:heading -->

<!-- /wp:heading -->

<!-- wp:paragraph -->

<!-- /wp:paragraph -->

<!-- wp:paragraph -->

<!-- /wp:paragraph --></p><p>I hope this project is very helpful to you. If you have any questions, you can comment below. I will reply as soon as possible. Thanks.</p></p>
</div>

<!-- Comment section -->
<h3>Leave a Comment</h3>
<form method="POST" action="/face-recognition-system-complete-code-with-a-full-demonstration/comment.html" class="p-3 bg-light rounded shadow">
  <input type="hidden" name="parent_id" value="" />

  <div class="form-group">
    <label>Your Name</label>
    <input type="text" name="name" class="form-control" required />
  </div>

  <div class="form-group">
    <label>Your Comment</label>
    <textarea name="content" class="form-control" rows="3" required></textarea>
  </div>

  <button type="submit" class="btn btn-primary">Post Comment</button>
</form>

<hr />

<!--
<h4>Comments</h4>


  <p>No comments yet. Be the first to comment!</p>

-->

<!-- Post Footer -->
<footer
  class="post-footer"
  style="
    margin-top: 2rem;
    background: #f1f3f6;
    padding: 2rem;
    border-radius: 16px;
    text-align: center;
    font-size: 0.95rem;
    color: #444;
    box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.05);
  "
>
  <p><strong>Author:</strong> Ishwar Gautam</p>

  <!-- Buttons -->
  <div style="margin: 1rem 0">
    <a
      href="/"
      class="btn btn-outline-primary"
      style="margin-right: 1rem"
      >â† Back to Home</a
    >
    <a
      href="#"
      onclick="window.scrollTo({top: 0, behavior: 'smooth'});"
      class="btn btn-primary"
      >â†‘ Back to Top</a
    >
  </div>

  <!-- Social Icons -->
  <div class="social-icons" style="margin-top: 1.5rem">
    <a
      href="https://www.facebook.com/igtechteam/"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #3b5998"
      ><i class="fab fa-facebook"></i
    ></a>
    <a
      href="https://www.instagram.com/ishwar_gautam1/"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #e4405f"
      ><i class="fab fa-instagram"></i
    ></a>
    <a
      href="https://github.com/ishwargautam"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #333"
      ><i class="fab fa-github"></i
    ></a>
    <a
      href="https://www.linkedin.com/in/ishwargautam1"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #0077b5"
      ><i class="fab fa-linkedin"></i
    ></a>
    <a
      href="https://www.tiktok.com/@ishwar.gautam1?_t=8pdEalQ0Nn7&_r=1"
      target="_blank"
      style="margin: 0 10px; font-size: 1.5rem; color: #000"
      ><i class="fab fa-tiktok"></i
    ></a>
  </div>

  <!-- YouTube Subscribe -->
  <div style="margin-top: 1.5rem">
    <a
      class="youtube-btn"
      href="https://www.youtube.com/channel/UC4Wf9XNPsbXwQqfKlUZfmtw?sub_confirmation=1"
      target="_blank"
      style="
        background: #ff0000;
        color: white;
        padding: 0.6rem 1.2rem;
        border-radius: 30px;
        text-decoration: none;
        font-weight: bold;
        transition: background 0.3s ease;
      "
    >
      ðŸ”” Subscribe on YouTube
    </a>
  </div>
</footer>

</div>

    <!-- Footer -->
    
<!-- Leaving this empty so to skip base.html footer-->


    <!-- Summernote Initialization -->
    <script>
      $(document).ready(function () {
        $("#summernote").summernote({
          height: 300,
          toolbar: [
            ["style", ["style"]],
            ["font", ["bold", "italic", "underline", "clear"]],
            ["fontname", ["fontname"]],
            ["fontsize", ["fontsize"]],
            ["color", ["color"]],
            ["para", ["ul", "ol", "paragraph"]],
            ["insert", ["link", "picture", "video", "table", "hr"]],
            ["view", ["fullscreen", "codeview", "help"]],
            ["custom", ["codeblock"]],
          ],
          buttons: {
            codeblock: function (context) {
              var ui = $.summernote.ui;
              var button = ui.button({
                contents: '<i class="fa fa-code"></i> Code Block',
                tooltip: "Insert Code Block",
                click: function () {
                  let lang = prompt(
                    "Enter language (e.g. python, javascript, java, html, css):",
                    "python"
                  );
                  if (!lang) lang = "plaintext";

                  var codeBlock = `
                <pre><code class="language-${lang}" contenteditable="true" style="white-space: pre-wrap;"></code></pre>
              `;
                  context.invoke("editor.pasteHTML", codeBlock);
                  hljs.highlightAll();
                  var codeBlockNode =
                    context.invoke("editor.getBody").lastChild;
                  $(codeBlockNode).find("code").focus();
                },
              });
              return button.render();
            },
          },
        });

        // Auto-highlight on Enter inside code blocks
        $(".note-editable").on("keyup", function (e) {
          if (e.key === "Enter") {
            $(this)
              .find("pre code")
              .each(function () {
                hljs.highlightElement(this);
              });
          }
        });

        hljs.highlightAll();
      });
    </script>
  
        <h4>Comments</h4>
        <div class="comment-container">
            <p>Loading comments...</p>
        </div>

        <script>
        (function () {
          const form = document.querySelector("form");
          const commentsContainer = document.querySelector(".comment-container");
          if (!form || !commentsContainer) return;

          const slug = "face-recognition-system-complete-code-with-a-full-demonstration";
          const submitBtn = form.querySelector("button[type='submit']");

          form.addEventListener("submit", function (e) {
            e.preventDefault();
            const data = {
              slug,
              name: form.name.value.trim(),
              content: form.content.value.trim(),
              parent_id: form.parent_id.value || null,
            };

            if (!data.name || !data.content) {
              alert("Please fill in your name and comment.");
              return;
            }

            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = "Posting...";

            fetch("/.netlify/functions/submit_comment", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),
            })
            .then(res => {
              submitBtn.disabled = false;
              submitBtn.textContent = originalText;
              if (res.ok) {
                alert("Comment submitted!");
                form.reset();
                loadComments();
              } else {
                return res.text().then(text => alert("Failed: " + text));
              }
            })
            .catch(err => {
              submitBtn.disabled = false;
              submitBtn.textContent = originalText;
              alert("Error: " + err.message);
            });
          });

          function loadComments() {
            fetch(`/.netlify/functions/get_comments?slug=${encodeURIComponent(slug)}`)
              .then(res => {
                if (!res.ok) throw new Error("Failed to load comments");
                return res.json();
              })
              .then(comments => {
                commentsContainer.innerHTML = "";
                const map = {};
                comments.forEach(c => {
                  c.children = [];
                  map[c.id] = c;
                });
                comments.forEach(c => {
                  if (c.parent_id && map[c.parent_id]) {
                    map[c.parent_id].children.push(c);
                  }
                });

                const render = (comment) => {
                  const wrapper = document.createElement("div");
                  wrapper.className = "comment-container";

                  const header = document.createElement("div");
                  header.className = "comment-header";
                  header.innerHTML = `<strong>${escapeHtml(comment.name)}</strong><span class="comment-timestamp"> - ${new Date(comment.timestamp).toLocaleString()}</span>`;
                  wrapper.appendChild(header);

                  const content = document.createElement("div");
                  content.className = "comment-content";
                  content.textContent = comment.content;
                  wrapper.appendChild(content);

                  const replyLink = document.createElement("span");
                  replyLink.className = "reply-link";
                  replyLink.textContent = "Reply";
                  replyLink.onclick = () => toggleReplyForm(`reply-form-${comment.id}`);
                  wrapper.appendChild(replyLink);

                  const replyForm = document.createElement("form");
                  replyForm.method = "POST";
                  replyForm.className = "reply-form";
                  replyForm.id = `reply-form-${comment.id}`;
                  replyForm.innerHTML = `
                    <input type="hidden" name="parent_id" value="${comment.id}" />
                    <input type="text" name="name" placeholder="Your Name" class="form-control form-control-sm" required />
                    <textarea name="content" placeholder="Write a reply..." class="form-control form-control-sm" rows="2" required></textarea>
                    <button type="submit" class="btn btn-sm btn-primary">Post Reply</button>
                  `;
                  replyForm.addEventListener("submit", function (e) {
                    e.preventDefault();
                    const replyData = {
                      slug,
                      name: replyForm.name.value.trim(),
                      content: replyForm.content.value.trim(),
                      parent_id: comment.id,
                    };

                    if (!replyData.name || !replyData.content) {
                      alert("Please fill in your name and reply.");
                      return;
                    }

                    const replyBtn = replyForm.querySelector("button");
                    const originalText = replyBtn.textContent;
                    replyBtn.disabled = true;
                    replyBtn.textContent = "Posting...";

                    fetch("/.netlify/functions/submit_comment", {
                      method: "POST",
                      headers: {
                        "Content-Type": "application/json",
                      },
                      body: JSON.stringify(replyData),
                    })
                      .then(res => {
                        replyBtn.disabled = false;
                        replyBtn.textContent = originalText;
                        if (res.ok) {
                          alert("Reply submitted!");
                          replyForm.reset();
                          replyForm.style.display = "none";
                          loadComments();
                        } else {
                          return res.text().then(text => alert("Failed: " + text));
                        }
                      })
                      .catch(err => {
                        replyBtn.disabled = false;
                        replyBtn.textContent = originalText;
                        alert("Error: " + err.message);
                      });
                  });
                  wrapper.appendChild(replyForm);

                  if (comment.children.length) {
                    const nested = document.createElement("div");
                    nested.className = "nested-replies";
                    comment.children.forEach(child => nested.appendChild(render(child)));
                    wrapper.appendChild(nested);
                  }

                  return wrapper;
                };

                const topLevel = comments.filter(c => !c.parent_id);
                if (topLevel.length === 0) {
                  commentsContainer.innerHTML = "<p>No comments yet. Be the first to comment!</p>";
                } else {
                  topLevel.forEach(c => commentsContainer.appendChild(render(c)));
                }
              })
              .catch(err => {
                commentsContainer.innerHTML = "<p>Failed to load comments.</p>";
                console.error(err);
              });
          }

          function toggleReplyForm(id) {
            const form = document.getElementById(id);
            if (form) {
              const isHidden = window.getComputedStyle(form).display === "none";
              form.style.display = isHidden ? "block" : "none";
            }
          }

          function escapeHtml(text) {
            return text
              .replace(/&/g, "&amp;")
              .replace(/</g, "&lt;")
              .replace(/>/g, "&gt;")
              .replace(/"/g, "&quot;")
              .replace(/'/g, "&#039;");
          }

          loadComments();
        })();
        </script>
        
</body>
</html>